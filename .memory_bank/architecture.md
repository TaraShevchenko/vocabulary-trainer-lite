# VOCABULARY TRAINER LITE - АРХИТЕКТУРА

## ОБЗОР СИСТЕМЫ

Vocabulary Trainer Lite - это веб-приложение для изучения английских слов с системой прогресса и различными типами упражнений, построенное на T3 Stack с современными технологиями.

## ТЕХНИЧЕСКИЙ СТЕК

### Frontend

- **Next.js 15** - React фреймворк с App Router
- **React 19** - UI библиотека
- **TypeScript** - типизированный JavaScript
- **Tailwind CSS** - utility-first CSS фреймворк
- **Radix UI** - компоненты UI с accessibility
- **React Hook Form** - управление формами
- **Zod** - валидация схем

### Backend

- **Prisma** - ORM для работы с базой данных
- **PostgreSQL** - реляционная база данных
- **Server Actions** - серверные действия Next.js

### Авторизация и Аутентификация

- **Clerk** - сервис аутентификации
- Поддержка социальных входов
- Управление пользователями и сессиями

### Инфраструктура

- **Vercel** - платформа для деплоя и хостинга приложения
- **Neon** - платформа для деплоя и хостинга базы данных
- **ESLint + Prettier** - линтинг и форматирование

## АРХИТЕКТУРНЫЕ ПРИНЦИПЫ

### Структура проекта (Feature-Sliced Design)

```
src/
├── app/                    # Next.js App Router
│   ├── page.tsx           # Дашборд с группами
│   ├── exercises/         # Страницы упражнений
│   │   └── [groupId]/
│   │       ├── page.tsx           # Выбор типа упражнения
│   │       ├── matching/
│   │       │   └── page.tsx       # Упражнение "Сопоставление"
│   │       ├── choice/
│   │       │   └── page.tsx       # Упражнение "Множественный выбор"
│   │       └── typing/
│   │           └── page.tsx       # Упражнение "Ввод перевода"
│   ├── layout.tsx         # Корневой layout
│   └── globals.css        # Глобальные стили
├── modules/               # Бизнес-логика по модулям
│   ├── groups/           # Управление группами слов
│   │   ├── model/
│   │   │   ├── types.groups.ts    # Типы данных
│   │   │   ├── actions.groups.ts  # Server Actions
│   │   │   └── router.groups.ts  # Запросы к БД
│   │   ├── ui/
│   │   │   ├── GroupsList.tsx     # Список групп на дашборде
│   │   │   └── GroupCard.tsx      # Карточка группы с прогрессом
│   │   └── index.ts              # Экспорты модуля
│   ├── words/            # Работа со словами
│   │   ├── model/
│   │   │   ├── types.words.ts     # Типы данных
│   │   │   ├── actions.words.ts   # Server Actions
│   │   │   └── router.words.ts   # Запросы к БД
│   │   ├── ui/
│   │   │   └── ProgressBar.tsx    # Индикатор прогресса
│   │   └── index.ts              # Экспорты модуля
│   └── exercises/        # Система упражнений
│       ├── model/
│       │   ├── types.exercises.ts # Типы упражнений
│       │   ├── actions.exercises.ts # Server Actions
│       │   └── progress.ts        # Логика прогресса
│       ├── ui/
│       │   ├── MatchingExercise.tsx    # Сопоставление
│       │   ├── MultipleChoiceExercise.tsx # Множественный выбор
│       │   ├── TypingExercise.tsx      # Ввод перевода
│       │   ├── ExerciseResult.tsx      # Результаты
│       │   └── ExerciseTypeSelector.tsx # Выбор типа упражнения
│       └── index.ts              # Экспорты модуля
├── shared/               # Общие компоненты и утилиты
│   ├── api/             # API утилиты
│   │   ├── auth.ts      # Аутентификация
│   │   └── database.ts  # Подключение к БД
│   ├── ui/              # UI компоненты
│   │   ├── Button.tsx   # Кнопка
│   │   ├── Card.tsx     # Карточка
│   │   ├── Input.tsx    # Поле ввода
│   │   └── Modal.tsx    # Модальное окно
│   ├── utils/           # Вспомогательные функции
│   │   ├── progress.ts  # Утилиты прогресса
│   │   └── validation.ts # Валидация
│   ├── types/           # Общие типы
│   │   └── index.ts     # Экспорт типов
│   ├── constants/       # Константы
│   │   └── index.ts     # Общие константы
└── widgets/             # Составные компоненты
    └── Header.tsx     # Простая шапка с логотипом
```

### Принципы организации кода

- **Feature-Sliced Design** - модульная архитектура
- **Type Safety** - строгая типизация на всех уровнях
- **Server Components** - использование RSC где возможно
- **Progressive Enhancement** - работа без JavaScript
- **Separation of Concerns** - разделение логики по слоям

## МОДЕЛЬ ДАННЫХ

### Основные сущности

#### User (Пользователь)

- Интеграция с Clerk для аутентификации
- Связь с группами слов и прогрессом
- Персональные настройки обучения

#### WordGroup (Группа слов)

- Название и описание группы
- Принадлежность пользователю
- Список слов в группе
- Метаданные (дата создания, количество слов)

#### Word (Слово)

- Английское слово
- Русский перевод
- Принадлежность к группе
- Дополнительная информация (транскрипция, примеры)

#### UserWordProgress (Прогресс изучения слова)

- Связь пользователя и слова
- Текущий процент изучения (0-100%)
- Дата последнего изучения
- Счетчики правильных/неправильных ответов
- История изменения прогресса

#### ExerciseSession (Сессия упражнений)

- Пользователь и группа слов
- Тип упражнения
- Результаты сессии
- Время начала и окончания

#### ExerciseResult (Результат упражнения)

- Связь с сессией упражнений
- Слово и данный ответ
- Правильность ответа
- Время ответа

### Связи между сущностями

- User → WordGroup (один ко многим)
- WordGroup → Word (один ко многим)
- User + Word → UserWordProgress (один к одному)
- User → ExerciseSession (один ко многим)
- ExerciseSession → ExerciseResult (один ко многим)

## ТИПЫ УПРАЖНЕНИЙ

### 1. Сопоставление (Matching)

- Две колонки: английские слова и русские переводы
- Простой интерфейс с кликами: пользователь выбирает слово в одной колонке, затем соответствующее слово в другой колонке
- После выбора слова в одной колонке, эта колонка блокируется до выбора пары
- Мгновенная обратная связь: правильный ответ увеличивает прогресс слова, неправильный - уменьшает
- Проверка каждого сопоставления по мере выбора

### 2. Множественный выбор (Multiple Choice)

- Показывается английское слово
- 4 варианта русского перевода
- Один правильный ответ

### 3. Ввод перевода (Typing)

- Показывается русское слово
- Нужно ввести английский перевод
- Проверка с учетом регистра и опечаток

## СИСТЕМА ПРОГРЕССА

### Логика изменения прогресса

- **Правильный ответ**: +10% (максимум 50% в день)
- **Неправильный ответ**: -5%
- **Автоматическое снижение**: -10% каждые 2 дня
- **Завершенные слова**: 100% прогресс = исключение из упражнений

### Ограничения

- Максимум 50% прогресса в день на слово
- Минимум 0%, максимум 100%
- Отслеживание времени последнего изучения

## ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС

### Дашборд

- Карточки групп слов с ключевой информацией:
  - Название группы
  - Количество слов в группе
  - Общий процент прогресса по всем словам группы
- Клик по карточке ведет сразу к выбору типа упражнения

### Страницы упражнений

- Выбор типа упражнения (`/exercises/[groupId]`)
- Интерактивные упражнения по типам
- Система обратной связи
- Отображение прогресса сессии
- После завершения - автоматический возврат на дашборд

### Упрощенная навигация

- Минималистичная шапка: только логотип для возврата на дашборд
- Прямой переход: с дашборда сразу к упражнениям
- Автоматический возврат: после завершения упражнений на дашборд
- Сохранение прогресса: после каждого выполненного упражнения

## БЕЗОПАСНОСТЬ

### Аутентификация

- Clerk обрабатывает все аспекты аутентификации
- JWT токены для API запросов
- Middleware для защиты роутов

### Авторизация

- Row Level Security через Prisma
- Проверка прав доступа на уровне Server Actions
- Изоляция данных между пользователями

### Валидация данных

- Zod схемы для всех входных данных
- Санитизация пользовательского ввода
- Проверка типов на compile-time

## ПРОИЗВОДИТЕЛЬНОСТЬ

### Оптимизации

- Server Components для статического контента
- Lazy loading компонентов упражнений
- Оптимизация запросов к БД
- Кэширование результатов

### Мониторинг

- Встроенная аналитика Next.js
- Error boundaries для обработки ошибок
- Логирование прогресса обучения

## ПЛАНЫ РАЗВИТИЯ

### Фаза 1: Базовая функциональность

1. Модель данных и миграции
2. Система аутентификации
3. Управление группами слов
4. Базовые упражнения
5. Система прогресса

### Фаза 2: Улучшения UX

1. Адаптивный дизайн
2. Анимации и переходы
3. Звуковые эффекты
4. Темная тема

### Фаза 3: Расширенные возможности

1. Статистика и аналитика
2. Экспорт/импорт словарей
3. Настройки сложности
4. Система достижений

### Будущие возможности

- Произношение слов (Text-to-Speech)
- Мобильное приложение
- Социальные функции
- AI-помощник для изучения
- Интеграция с внешними словарями
